# Canvas烟花组件

基于微信小程序Canvas 2D API实现的高度还原烟花效果组件。

## 功能特性

✨ **高度还原真实烟花效果**
- 火箭发射：从底部发射，带有发光轨迹
- 随机爆炸：在随机高度爆炸成璀璨粒子
- 物理模拟：真实的重力、摩擦力效果
- 渐变消失：粒子逐渐暗淡并消失

🎨 **完全随机的颜色系统**
- 随机火箭颜色（15种预设色）
- 随机爆炸颜色组合（8组配色方案）
- 每个粒子随机选择颜色组中的一种

⚡ **性能优化**
- 使用Canvas 2D API，性能优于CSS动画
- 自动适配设备像素比
- 粒子生命周期管理，自动回收
- 支持页面显示/隐藏时暂停/恢复动画

## 使用方法

### 1. 引入组件

在页面的`.json`文件中注册组件：

\`\`\`json
{
  "usingComponents": {
    "fireworks-canvas": "/components/fireworks-canvas/fireworks-canvas"
  }
}
\`\`\`

### 2. 使用组件

在页面的`.wxml`文件中使用：

\`\`\`xml
<!-- 基础用法 -->
<fireworks-canvas></fireworks-canvas>

<!-- 自定义配置 -->
<fireworks-canvas 
  enabled="{{true}}" 
  frequency="{{2500}}"
></fireworks-canvas>

<!-- 根据时间显示 -->
<fireworks-canvas 
  wx:if="{{timeTheme === 'night' || timeTheme === 'evening'}}" 
  enabled="{{true}}"
></fireworks-canvas>
\`\`\`

## 组件属性

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| enabled | Boolean | true | 是否启用烟花效果 |
| frequency | Number | 2000 | 烟花发射频率（毫秒） |

## 技术细节

### 烟花发射

- 发射位置：屏幕宽度的20%-80%随机位置
- 目标高度：屏幕高度的20%-50%随机高度
- 初始速度：-8到-12的随机上升速度
- 重力加速度：0.1

### 烟花爆炸

- 粒子数量：80-120个随机粒子
- 爆炸方向：360度均匀分布
- 粒子速度：2-6的随机速度
- 颜色组合：从8组预设配色中随机选择
- 中心闪光：额外20个白色粒子模拟爆炸闪光

### 粒子物理

- 重力：0.05-0.1随机重力加速度
- 摩擦力：0.96-0.98随机摩擦系数
- 生命周期：80-120帧
- 渐变消失：alpha随生命周期线性递减

### 颜色系统

#### 火箭颜色（15种）
\`\`\`javascript
'#FF6B6B', '#FFD93D', '#6BCB77', '#4D96FF', '#B24BF3',
'#FF6348', '#FFA502', '#2ED573', '#5F27CD', '#48DBFB',
'#FF6B9D', '#C44569', '#FFC312', '#F953C6', '#B91D73'
\`\`\`

#### 爆炸颜色组合（8组）
1. 红黄白：`#FF6B6B`, `#FFD93D`, `#FFFFFF`
2. 蓝粉白：`#4D96FF`, `#FFB6D9`, `#FFFFFF`
3. 紫黄青：`#B24BF3`, `#FFE66D`, `#00D9FF`
4. 红橙绿：`#FF4757`, `#FFA502`, `#2ED573`
5. 紫红青：`#5F27CD`, `#FF6348`, `#48DBFB`
6. 粉红黄：`#FF6B9D`, `#C44569`, `#FFC312`
7. 蓝白：`#00D2FF`, `#3A7BD5`, `#FFFFFF`
8. 粉紫白：`#F953C6`, `#B91D73`, `#FFFFFF`

## 性能优化建议

1. **按需显示**：在不需要烟花效果的页面使用`wx:if`控制显示
2. **调整频率**：根据设备性能调整`frequency`参数
3. **页面切换**：组件会自动在页面隐藏时暂停动画
4. **粒子数量**：当前每次爆炸80-120个粒子，可根据需要调整

## 浏览器兼容性

- 微信小程序基础库 2.9.0+（Canvas 2D API）
- 建议在真机上测试效果

## 示例项目

参考 `pages/index` 页面的使用示例。

## 许可证

MIT
